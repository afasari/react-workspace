import{j as e,w as b}from"./jsx-runtime-Bt6zTnZ3.js";import{b as y,u as j,r as i}from"./chunk-K6CSEXPM-C8WhipqY.js";const k={normal:"from-gray-400 to-gray-500",fire:"from-orange-400 to-orange-600",water:"from-blue-400 to-blue-600",grass:"from-green-400 to-green-600",electric:"from-yellow-300 to-yellow-500",ice:"from-cyan-300 to-cyan-500",fighting:"from-red-400 to-red-600",poison:"from-purple-400 to-purple-600",ground:"from-amber-400 to-amber-600",flying:"from-indigo-300 to-indigo-500",psychic:"from-pink-400 to-pink-600",bug:"from-lime-400 to-lime-600",rock:"from-stone-400 to-stone-600",ghost:"from-violet-400 to-violet-600",dark:"from-gray-600 to-gray-800",dragon:"from-indigo-500 to-indigo-700",steel:"from-slate-400 to-slate-600",fairy:"from-pink-300 to-pink-500"};function v({pokemon:o}){const a=o.types[0].type.name,r=k[a];return e.jsx(y,{to:`/pokemon/${o.id}`,children:e.jsxs("div",{className:`relative rounded-2xl p-6 shadow-lg transition-all duration-300 hover:-translate-y-1 hover:shadow-xl bg-gradient-to-br ${r}`,children:[e.jsxs("span",{className:"absolute top-3 right-3 text-lg font-bold text-white/70",children:["#",String(o.id).padStart(3,"0")]}),e.jsx("div",{className:"relative aspect-square mb-4",children:e.jsx("img",{src:o.sprites.other["official-artwork"].front_default,alt:o.name,className:"w-full h-full object-contain drop-shadow-lg",loading:"lazy"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-bold capitalize mb-2 text-white",children:o.name}),e.jsx("div",{className:"flex gap-2 justify-center flex-wrap",children:o.types.map(t=>e.jsx("span",{className:"px-3 py-1 rounded-full bg-white/20 text-white text-sm font-medium capitalize backdrop-blur-sm",children:t.type.name},t.type.name))})]})]})})}async function p(o,a=3){for(let r=0;r<a;r++)try{const t=await fetch(o);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return await t.json()}catch(t){if(r===a-1)throw t;await new Promise(l=>setTimeout(l,1e3*(r+1)))}}const C=b(function(){const{pokemon:a,nextOffset:r,total:t}=j(),[l,u]=i.useState(a),[c,g]=i.useState(r),[d,h]=i.useState(!1),m=i.useRef(null);return i.useEffect(()=>{const n=new IntersectionObserver(async x=>{if(x[0].isIntersecting&&!d&&c<t){h(!0);try{const f=await p(`https://pokeapi.co/api/v2/pokemon?limit=20&offset=${c}`),w=(await Promise.all(f.results.map(s=>p(s.url).catch(()=>null)))).filter(s=>s!==null);u(s=>[...s,...w]),g(s=>s+20)}catch(f){console.error("Error loading more Pokemon:",f)}finally{h(!1)}}},{threshold:.1});return m.current&&n.observe(m.current),()=>n.disconnect()},[c,d]),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 bg-black/20 p-4 rounded-lg shadow-lg",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Generation I"}),e.jsxs("span",{className:"text-white bg-black/20 px-3 py-1 rounded-full text-sm",children:[l.length," / ",t," PokÃ©mon"]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:l.map(n=>e.jsx(v,{pokemon:n},n.id))}),c<t&&e.jsx("div",{ref:m,className:"mt-8 p-4 text-center",children:d?e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-4 border-white/20 border-t-white"}):e.jsx("div",{className:"h-8"})})]})});export{C as default};
